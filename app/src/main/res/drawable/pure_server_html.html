<!DOCTYPE html>
<!-- saved from url=(0091)https://adityasridhar.com/posts/how-to-use-nodejs-without-frameworks-and-external-libraries -->
<html lang="en-US" class="gr__adityasridhar_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.5.0 --><title>How to use NodeJS without frameworks and external libraries | Aditya’s Blog</title><meta name="generator" content="Jekyll v3.8.5"><meta property="og:title" content="How to use NodeJS without frameworks and external libraries"><meta name="author" content="Aditya Sridhar"><meta property="og:locale" content="en_US"><meta name="description" content="NodeJS is most commonly used with Express framework. Also a bunch of other external libraries are used with NodeJS."><meta property="og:description" content="NodeJS is most commonly used with Express framework. Also a bunch of other external libraries are used with NodeJS."><link rel="canonical" href="https://adityasridhar.com/posts/how-to-use-nodejs-without-frameworks-and-external-libraries"><meta property="og:url" content="https://adityasridhar.com/posts/how-to-use-nodejs-without-frameworks-and-external-libraries"><meta property="og:site_name" content="Aditya’s Blog"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-11-01T00:00:00+00:00"> <script type="text/javascript" async="" src="./pure_server_html_files/analytics.js"></script><script async="" src="./pure_server_html_files/gtm.js"></script><script type="application/ld+json"> {"description":"NodeJS is most commonly used with Express framework. Also a bunch of other external libraries are used with NodeJS.","author":{"@type":"Person","name":"Aditya Sridhar"},"@type":"BlogPosting","url":"https://adityasridhar.com/posts/how-to-use-nodejs-without-frameworks-and-external-libraries","headline":"How to use NodeJS without frameworks and external libraries","dateModified":"2018-11-01T00:00:00+00:00","datePublished":"2018-11-01T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://adityasridhar.com/posts/how-to-use-nodejs-without-frameworks-and-external-libraries"},"@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --><link rel="apple-touch-icon" sizes="180x180" href="https://adityasridhar.com/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77"><link rel="icon" type="image/png" sizes="32x32" href="https://adityasridhar.com/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77"><link rel="icon" type="image/png" sizes="16x16" href="https://adityasridhar.com/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77"><link rel="manifest" href="https://adityasridhar.com/assets/img/icons/manifest.json?v=qA3OXqyw77"><link rel="mask-icon" href="https://adityasridhar.com/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5"> <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]--><link rel="shortcut icon" href="https://adityasridhar.com/assets/img/icons/favicon.ico?v=qA3OXqyw77"><meta name="apple-mobile-web-app-title" content="Sleek"><meta name="application-name" content="Sleek"><meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77"><meta name="theme-color" content="#ffffff"> <!-- Twitter cards --><meta property="og:title" content="How to use NodeJS without frameworks and external libraries"><meta name="twitter:site" content="@adityasridhar18"><meta name="twitter:creator" content="@"><meta name="twitter:title" content="How to use NodeJS without frameworks and external libraries"><meta property="og:description" content="I am Aditya and I share useful information about Technology :) "><meta name="twitter:description" content="I am Aditya and I share useful information about Technology :) "><meta property="og:image" content="https://adityasridhar.com/assets/img/posts/how-to-use-nodejs.jpg"><meta property="og:type" content="article"><meta property="og:url" content="https://adityasridhar.com/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://adityasridhar.com/assets/img/posts/how-to-use-nodejs.jpg"> <!-- Google Tag Manager --> <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-N8XCTQ8');</script> <!-- End Google Tag Manager --><style class="inlineCSS"> h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#313237}@media only screen and (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px;max-width:100%;margin:0 auto}@media only screen and (min-width:36em){.container{max-width:540px;margin:0 auto}}@media only screen and (min-width:48em){.container{max-width:720px;margin:0 auto}}@media only screen and (min-width:62em){.container{max-width:960px;margin:0 auto}}@media only screen and (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media only screen and (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media only screen and (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__inner{display:block;position:relative;padding:1.875rem 1.25rem .625rem;width:100%;color:#838c8d;border-bottom:0}.post-card__header{margin-bottom:.75rem}.post-card__meta{font-size:.875rem}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media only screen and (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media only screen and (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}</style><link rel="stylesheet" href="./pure_server_html_files/main.css" as="style" onload="this.rel=&#39;stylesheet&#39;"> <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript> <script type="text/javascript"> { % include loadCss.js % } </script></head><body class="site" data-gr-c-s-loaded="true"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N8XCTQ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --><header class="header fix-nav" itemscope="" itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation"><div class="container"><div class="header__inner"> <a class="header__logo" href="https://adityasridhar.com/"><div> <img style="max-height:60px;" src="./pure_server_html_files/logo.jpg" alt="Aditya Sridhar"></div></a><nav class="header__links"><div class="container header__links-wrapper"> <a class="header__link" href="https://adityasridhar.com/" itemprop="url"> <span itemprop="name">Blog</span> </a> <a class="header__link" href="https://adityasridhar.com/categories" itemprop="url"> <span itemprop="name">Categories</span> </a> <a class="header__link" href="https://adityasridhar.com/about" itemprop="url"> <span itemprop="name">About Me</span> </a></div></nav><div class="header__toggle"> <span></span> <span></span> <span></span></div></div></div></header><div class="hero lazyloaded" data-bg="https://adityasridhar.com/assets/img/posts/how-to-use-nodejs_md.jpg" style="background-image: url(&quot;https://adityasridhar.com/assets/img/posts/how-to-use-nodejs_md.jpg&quot;);"><div class="hero__wrap"><div class="hero__categories"> <a class="label" href="https://adityasridhar.com/categories/#Web%20Development">Web Development</a> &nbsp; <a class="label" href="https://adityasridhar.com/categories/#Programming">Programming</a> &nbsp; <a class="label" href="https://adityasridhar.com/categories/#API">API</a></div><h1 class="hero__title">How to use NodeJS without frameworks and external libraries</h1><p class="hero__meta"> <span> <time>01 Nov 2018</time>&nbsp;· </span> <span> 11 mins read </span></p></div></div><span style="text-align:center;font-style:italic;margin-top:10px">Photo by <a href="https://unsplash.com/@emrekaratas">Emre Karataş</a> On <a href="https://unsplash.com/">Unsplash</a> </span><main class="site__content"><div class="container"><article class="post-content" itemprop="articleBody"><p>NodeJS is most commonly used with Express framework. Also a bunch of other external libraries are used with NodeJS.</p><p>The Reason these frameworks and libraries are used along with NodeJS is to make development much more easier and quicker.</p><p>While working on any real project, it is best to use frameworks and libraries where needed to enable quicker development 😄</p><p>That said, in this post I will be showing how to build Simple REST API’s with NodeJS without using express framework or any other external libraries. This article will use only those functionalities that are provided with NodeJS itself.</p><p>The reason for this is to show how NodeJS can be used without frameworks and libraries as well 😄. Also this will give a better idea as to how NodeJS works 😄</p><h1 id="pre-requisite">Pre-requisite</h1><p>Install NodeJS from <a href="https://nodejs.org/">https://nodejs.org</a></p><h1 id="code">Code</h1><p>The code for this article is available in my <a href="https://github.com/aditya-sridhar/simple-rest-apis-nodejs-without-frameworks">github repo</a>.</p><h1 id="lets-get-started-with-the-code-">Let’s get started with the code 😄</h1><p>Create a folder called as <strong>simple-rest-apis-nodejs-without-frameworks</strong>. This will be our NodeJS Project folder.</p><p>Go into the project folder and use <code class="highlighter-rouge">npm init</code> to make the project into a node project. The commands to do this are</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>simple-rest-apis-nodejs-without-frameworks
npm init
</code></pre></div></div><h1 id="packagejson">package.json</h1><p>After running <code class="highlighter-rouge">npm init</code> a <strong>package.json</strong> file is created within the project folder.</p><p>package.json has information about your project like project name, version, description etc. Also package.json is where you will be adding node dependencies. In this article we won’t be having any dependencies since we are using only functionalities that are provided by NodeJS itself.</p><h1 id="first-api">First API</h1><h2 id="serverjs">server.js</h2><p>create a file called <strong>server.js</strong> inside the project folder. This will be the starting point of our application.</p><p>Copy the following code into server.js</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">hostname</span> <span class="o">=</span> <span class="s1">'127.0.0.1'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./controller.js'</span><span class="p">);</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="nx">hostname</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Server running at http://</span><span class="p">${</span><span class="nx">hostname</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">/`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><p>This code actually relies on a file called as <strong>controller.js</strong> which we will be adding soon. This code is telling that a server needs to listen on <strong>port 3000</strong> and in <strong>localhost</strong></p><p>The server creation is done in <strong>controller.js</strong></p><h2 id="controllerjs">controller.js</h2><p>This is the file where we will be creating the server and defining our rest endpoints. Create a file called as <strong>controller.js</strong></p><p>Let’s create a single GET endpoint first in <strong>controller.js</strong></p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./service.js'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">reqUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="c1">// GET Endpoint</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">==</span> <span class="s1">'/sample'</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">'GET'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request Type:'</span> <span class="o">+</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">+</span> <span class="s1">' Endpoint: '</span> <span class="o">+</span>
            <span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span><span class="p">);</span>

        <span class="nx">service</span><span class="p">.</span><span class="nx">sampleRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
    <span class="p">}</span> 
<span class="p">});</span>
</code></pre></div></div><p>First <strong>http</strong> and <strong>url</strong> modules are imported. These modules are provided by NodeJS itself.</p><p><strong>http</strong> module enables to create web applications. It supports both client and server operations.</p><p><strong>url</strong> module helps in parsing urls</p><p>The line <code class="highlighter-rouge">http.createServer((req, res) =&gt; {</code> indicates that a http server needs to be created with <strong>request as req and response as res</strong></p><p><strong>module.exports</strong> is used to export this file as a module. This is why we could import <strong>controller.js</strong> in <strong>server.js</strong> using <code class="highlighter-rouge">const server = require('./controller.js');</code></p><p>It can be seen that this file requires <strong>service.js</strong> which we will talk about later.</p><p>The code <code class="highlighter-rouge">const reqUrl = url.parse(req.url, true);</code> gets the request url and parses it so that we can run some url functions on it.</p><p>The First endpoint we are going to create is a <strong>GET</strong> endpoint with endpoint url as <strong>/sample</strong></p><p>In order to do url routing we will be using <strong>if else conditions</strong></p><p>The line <code class="highlighter-rouge">if (reqUrl.pathname == '/sample' &amp;&amp; req.method === 'GET') {</code> checks if the url being requested is <strong>/sample</strong> and also checks if the request type is <strong>GET</strong></p><p>The logic for this get request is present in <strong>service.sampleRequest(req, res);</strong> which is a function defined in <strong>service.js</strong></p><h2 id="servicejs">service.js</h2><p>This is where the actual api logic will be present. Create a file called as <strong>service.js</strong>.</p><p>Copy the following code into <strong>service.js</strong></p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">sampleRequest</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">reqUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'World'</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reqUrl</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">name</span> <span class="o">=</span> <span class="nx">reqUrl</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">name</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Hello "</span> <span class="o">+</span> <span class="nx">name</span>
    <span class="p">};</span>

    <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'application/json'</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div></div><p>This code checks if the request URL has a query parameter called as <strong>name</strong> and stores it in name variable. If no query parameter is present, it defaults to the string <strong>World</strong></p><p>The response status is set as <strong>200</strong>, Content Type of the response is <strong>JSON</strong> and finally the response is sent back using <code class="highlighter-rouge">res.end(JSON.stringify(response));</code></p><p>since <strong>response variable</strong> is a JSON Object, we are using <strong>JSON.stringify</strong> on it to convert it to string before sending back the http response</p><p>Now we can run the application using the command</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node server.js
</code></pre></div></div><h2 id="testing">Testing</h2><p>In order to test the endpoint use <strong>postman</strong>. You can download it from <a href="https://www.getpostman.com/">here</a></p><p>In postman select Get request and type the url as <strong>http://localhost:3000/sample?name=aditya</strong> and hit send</p><p class="img-responsive"><img src="./pure_server_html_files/get_name.jpg" alt="Postman GET name"></p><p>The output for this request is shown below</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Hello aditya"</span>
<span class="p">}</span>
</code></pre></div></div><p>Now type the url as <strong>http://localhost:3000/sample</strong> and hit send</p><p>The output for this request is shown below</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Hello World"</span>
<span class="p">}</span>
</code></pre></div></div><h1 id="second-api">Second API</h1><p>In this section we will be building the second API which is a <strong>POST</strong> request. Also if user hits some random url, we will need to indicate that it is an invalid route. We will add the logic for that as well here.</p><h2 id="controllerjs-1">controller.js</h2><p>Update the code in <strong>controller.js</strong> to the one shown below</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./service.js'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">reqUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

    <span class="c1">// GET Endpoint</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">==</span> <span class="s1">'/sample'</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">'GET'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request Type:'</span> <span class="o">+</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">+</span> <span class="s1">' Endpoint: '</span> <span class="o">+</span>
            <span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span><span class="p">);</span>

        <span class="nx">service</span><span class="p">.</span><span class="nx">sampleRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>

        <span class="c1">// POST Endpoint</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">==</span> <span class="s1">'/test'</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="s1">'POST'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request Type:'</span> <span class="o">+</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">+</span> <span class="s1">' Endpoint: '</span> <span class="o">+</span>
            <span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span><span class="p">);</span>

        <span class="nx">service</span><span class="p">.</span><span class="nx">testRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request Type:'</span> <span class="o">+</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">+</span> <span class="s1">' Invalid Endpoint: '</span> <span class="o">+</span>
            <span class="nx">reqUrl</span><span class="p">.</span><span class="nx">pathname</span><span class="p">);</span>

        <span class="nx">service</span><span class="p">.</span><span class="nx">invalidRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div><p>The post endpoint will have the url <strong>/test</strong>. This code has a condition to check for <strong>/test</strong> endpoint. The logic for <strong>/test</strong> endpoint will be in <strong>service.testRequest(req, res);</strong> which is in <strong>service.js</strong></p><p>This code also has an else condition for invalid routes. The logic for invalid routes is handled in <strong>service.invalidRequest(req, res);</strong></p><h2 id="servicejs-1">service.js</h2><p>Add the following piece of code to <strong>service.js</strong>. Do not delete the existing code in service.js. Add this code below the existing code.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">testRequest</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">body</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">body</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

        <span class="nx">postBody</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Post Request Value is  "</span> <span class="o">+</span> <span class="nx">postBody</span><span class="p">.</span><span class="nx">value</span>
        <span class="p">};</span>

        <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'application/json'</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">));</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div><p>For a POST request, an input POST body is given when the endpoint is called.</p><p>In the code we will need to get this POST body from the request.</p><p>The following code does this</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">body</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div><p>The request comes in the form of a <strong>stream</strong>. This code takes the stream of data and keeps appending it to <strong>body</strong>.</p><p><code class="highlighter-rouge">req.on('end', function () {</code> is executed only after the streaming is complete and the full <strong>post body</strong> is received.</p><p><code class="highlighter-rouge">postBody = JSON.parse(body);</code> This code converts the input post body into JSON format so that we can use the values in it.</p><p>in the code we are using <strong>value</strong> field in the <strong>postBody</strong>.</p><p>The response is set similar to how we did it for GET request.</p><h2 id="logic-for-invalid-request">logic for invalid request</h2><p>Add the following piece of code to <strong>service.js</strong>. Do not delete the existing code in service.js. Add this code below the existing code.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">invalidRequest</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">404</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/plain'</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'Invalid Request'</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div><p>For an invalid request, the status is set to <strong>404</strong> and content type is set to <strong>text</strong>. The actual content sent back is <strong>Invalid Request</strong></p><h2 id="testing-1">Testing</h2><p>Go to postman. Select the request Type as <strong>POST</strong> and type the following url <strong>http://localhost:3000/test</strong>.</p><p class="img-responsive"><img src="./pure_server_html_files/post_request.jpg" alt="Postman POST"></p><p>Also select <strong>Body</strong> , <strong>raw</strong> and <strong>application/json</strong> as shown in the image</p><p>The input Post body is given below</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="s2">"value"</span> <span class="p">:</span> <span class="s2">"nodejs"</span>
<span class="p">}</span>
</code></pre></div></div><p>Click on send in postman</p><p>The API output is given below</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"text"</span><span class="p">:</span> <span class="s2">"Post Request Value is  nodejs"</span>
<span class="p">}</span>
</code></pre></div></div><p>You can also try with an Invalid request. In postman select <strong>GET</strong> and type the url as <strong>http://localhost:3000/test123</strong></p><p>The response for this will be <strong>Invalid Text</strong></p><h1 id="congrats-">Congrats 😄</h1><p>You now know how to create REST API’s in NodeJS without using any framework or external library 😄</p><p><strong>In Real Projects always use a framework or library wherever possible to make dev cycle easier and quicker</strong></p><p></p><h3>Feel free to connect with me in <a href="https://www.linkedin.com/in/aditya1811">LinkedIn</a> or follow me in <a href="https://www.twitter.com/adityasridhar18">Twitter</a></h3><p></p></article><div class="post-content controls__inner"><div class="controls__item prev"> <span>Previous</span> <a href="https://adityasridhar.com/posts/how-to-create-simple-rest-apis-with-springboot"> <span> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="11"><path fill="fillColor" d="M5.647 1.718c.37-.434.323-1.09-.106-1.465A1.016 1.016 0 0 0 4.095.36L.25 4.875a1.05 1.05 0 0 0 .017 1.378l3.95 4.407c.38.424 1.03.456 1.448.07a1.05 1.05 0 0 0 .07-1.468l-3.34-3.725 3.253-3.819z"></path> </svg> </span> How to create simple rest a... </a></div><div class="controls__item next"> <span>Next</span> <a href="https://adityasridhar.com/posts/how-to-get-started-with-maven"> How to get started with Maven <span> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="11"><path fill="#fillColor" d="M.353 9.282c-.37.434-.323 1.09.106 1.465a1.016 1.016 0 0 0 1.446-.107L5.75 6.125a1.05 1.05 0 0 0-.017-1.378L1.784.34A1.015 1.015 0 0 0 .336.27a1.05 1.05 0 0 0-.07 1.468l3.34 3.725L.353 9.282z"></path> </svg> </span> </a></div></div></div></main><footer class="footer"><div class="container"><nav class="social"> <a class="social__link" target="_blank" rel="noopener noreferrer" href="https://github.com/aditya-sridhar"> <svg class="social__icon" viewBox="0 0 20 20" width="20px" height="20px"><path d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path></svg> </a> <a class="social__link" target="_blank" rel="noopener noreferrer" href="https://www.twitter.com/adityasridhar18"> <svg class="social__icon" viewBox="0 0 20 20" width="30px" height="30px"><path d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path></svg> </a> <a class="social__link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/aditya1811"> <svg class="social__icon" viewBox="0 0 30 30" width="30px" height="30px"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg> </a></nav><div> <a href="https://adityasridhar.com/privacypolicy/">Privacy Policy</a> <!-- <a href='https://adityasridhar.com/cookiepolicy/'>Cookie Policy</a> --></div><span>© 2019 Aditya's Blog. All rights reserved.</span></div></footer><script async="" src="./pure_server_html_files/bundle.js"></script>
</body></html>